# Study Planner API

RESTful API для управления учебным расписанием и заданиями. Бэкенд для консольного приложения "Планировщик учебного процесса".

## Описание

Этот API позволяет:

- Управлять занятиями (добавлять, просматривать, обновлять, удалять)
- Управлять заданиями (добавлять, просматривать, обновлять, удалять)
- Получать сводную нагрузку по дням

Данные хранятся в JSON-файлах (`data/schedule.json`, `data/assignments.json`).

## Требования

- Go (версия 1.21 или выше)

## Установка и запуск

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/a-liza223/study-planner-api.git
    cd study-planner-api
    ```

2.  **Установите зависимости:**
    ```bash
    go mod tidy
    ```

3.  **Запустите сервер:**
    ```bash
    go run main.go
    ```
    Сервер будет запущен на `http://localhost:8080` (или на другом порту, если он указан в переменной окружения `PORT`).

4.  **(Необязательно) Убедитесь, что существуют файлы данных:**
    При первом запуске приложения, если файлы `data/schedule.json` и `data/assignments.json` не существуют, они будут созданы с пустыми массивами. Убедитесь, что папка `data` существует.

## Использование API (Примеры)

Вы можете использовать инструменты командной строки, такие как `curl`, или специализированные приложения, такие как Postman или Insomnia, для взаимодействия с API.

### Занятия (Schedule)

*   **GET `/schedule`** - Получить список всех занятий.
*   **POST `/schedule`** - Добавить новое занятие.
    *   **Тело запроса (JSON):**
        ```json
        {
          "subject": "string",      // Название предмета (обязательно)
          "startTime": "string",    // Время начала в формате RFC3339 (обязательно, напр. "2023-10-27T09:00:00Z")
          "endTime": "string",      // Время окончания в формате RFC3339 (обязательно)
          "location": "string"      // Место проведения (необязательно)
        }
        ```
    *   **Пример тела:**
        ```json
        {
          "subject": "Математический Анализ",
          "startTime": "2025-12-10T10:00:00Z",
          "endTime": "2025-12-10T11:30:00Z",
          "location": "Аудитория 205"
        }
        ```
*   **GET `/schedule/{id}`** - Получить занятие по его ID (например, `/schedule/1`).
*   **PUT `/schedule/{id}`** - Обновить занятие по его ID.
    *   **Тело запроса (JSON):** Аналогично POST, но обновляются только указанные поля (в зависимости от реализации, часто заменяет весь объект).
        ```json
        {
          "subject": "Обновленный предмет",
          "startTime": "2025-12-10T10:15:00Z",
          "endTime": "2025-12-10T11:45:00Z",
          "location": "Новое место"
        }
        ```
*   **DELETE `/schedule/{id}`** - Удалить занятие по его ID.

### Задания (Assignments)

*   **GET `/assignments`** - Получить список всех заданий.
*   **POST `/assignments`** - Добавить новое задание.
    *   **Тело запроса (JSON):**
        ```json
        {
          "title": "string",        // Название задания (обязательно)
          "description": "string",  // Описание задания (необязательно)
          "dueDate": "string",      // Срок сдачи в формате RFC3339 (обязательно)
          "completed": "boolean"    // Статус выполнения (необязательно, по умолчанию false)
        }
        ```
    *   **Пример тела:**
        ```json
        {
          "title": "Лабораторная работа №5",
          "description": "Выполнить задания по разделу 3.2",
          "dueDate": "2025-12-15T23:59:00Z",
          "completed": false
        }
        ```
*   **GET `/assignments/{id}`** - Получить задание по его ID (например, `/assignments/1`).
*   **PUT `/assignments/{id}`** - Обновить задание по его ID.
    *   **Тело запроса (JSON):** Аналогично POST.
        ```json
        {
          "title": "Обновленное задание",
          "description": "Новое описание",
          "dueDate": "2025-12-20T23:59:00Z",
          "completed": true
        }
        ```
*   **DELETE `/assignments/{id}`** - Удалить задание по его ID.

### Нагрузка (Workload) - *Исправлено*

*   **GET `/workload`** - Получить сводку нагрузки по дням. Этот эндпоинт анализирует *задания* и группирует их по дням, когда они истекают (`dueDate`).
    *   **Параметры запроса (опционально):**
        *   `groupBy` (string): По какому полю группировать. Возможные значения: `day`, `week`, `month`. По умолчанию `day`.
    *   **Пример запроса:** `GET /workload?groupBy=week`
    *   **Ожидаемый ответ (пример структуры):**
        ```json
        {
          "groupBy": "day",
          "workload": [
            {
              "date": "2025-12-15",
              "count": 2,
              "assignments": [ /* список заданий на этот день */ ]
            },
            {
              "date": "2025-12-20",
              "count": 1,
              "assignments": [ /* список заданий на этот день */ ]
            }
          ]
        }
        ```
    
## Структура проекта

- `main.go` - Основной файл приложения, запускающий сервер и определяющий маршруты.
- `handlers/` - (Возможная папка) Содержит функции обработки запросов для каждого маршрута.
- `models/` - (Возможная папка) Содержит структуры данных (например, `Lesson`, `Assignment`).
- `data/` - Папка для хранения данных (`schedule.json`, `assignments.json`).
